"use strict";(globalThis.webpackChunkmi_documentacion=globalThis.webpackChunkmi_documentacion||[]).push([[4154],{6725(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"vcard-generator/funcionalidades-tecnicas","title":"Funcionalidades T\xe9cnicas","description":"Esta secci\xf3n profundiza en la implementaci\xf3n del c\xf3digo, detallando c\xf3mo se resuelven los desaf\xedos t\xe9cnicos clave del proyecto, as\xed como la documentaci\xf3n de los componentes principales.","source":"@site/docs/vcard-generator/funcionalidades-tecnicas.md","sourceDirName":"vcard-generator","slug":"/vcard-generator/funcionalidades-tecnicas","permalink":"/Documentacion/docs/vcard-generator/funcionalidades-tecnicas","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/vcard-generator/funcionalidades-tecnicas.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Configuraci\xf3n y Uso","permalink":"/Documentacion/docs/vcard-generator/configuracion-uso"},"next":{"title":"Resumen y Pr\xf3ximos Pasos","permalink":"/Documentacion/docs/vcard-generator/resumen"}}');var t=i(4848),a=i(8453);const r={sidebar_position:4},o="Funcionalidades T\xe9cnicas",c={},d=[{value:"1. Componentes Principales",id:"1-componentes-principales",level:2},{value:"<code>PhotoSection</code>",id:"photosection",level:3},{value:"<code>QRSection</code>",id:"qrsection",level:3},{value:"<code>VCardGenerator</code> (P\xe1gina Principal)",id:"vcardgenerator-p\xe1gina-principal",level:3},{value:"2. Enrutamiento (HashRouter vs BrowserRouter)",id:"2-enrutamiento-hashrouter-vs-browserrouter",level:2},{value:"3. Estrategias de Implementaci\xf3n",id:"3-estrategias-de-implementaci\xf3n",level:2},{value:"Sistema de Resoluci\xf3n de Identidad (Reciclaje)",id:"sistema-de-resoluci\xf3n-de-identidad-reciclaje",level:3},{value:"Generaci\xf3n y Optimizaci\xf3n de VCard",id:"generaci\xf3n-y-optimizaci\xf3n-de-vcard",level:3},{value:"Renderizado de C\xf3digos QR",id:"renderizado-de-c\xf3digos-qr",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"funcionalidades-t\xe9cnicas",children:"Funcionalidades T\xe9cnicas"})}),"\n",(0,t.jsx)(n.p,{children:"Esta secci\xf3n profundiza en la implementaci\xf3n del c\xf3digo, detallando c\xf3mo se resuelven los desaf\xedos t\xe9cnicos clave del proyecto, as\xed como la documentaci\xf3n de los componentes principales."}),"\n",(0,t.jsx)(n.h2,{id:"1-componentes-principales",children:"1. Componentes Principales"}),"\n",(0,t.jsx)(n.p,{children:"A continuaci\xf3n se describen los componentes core de la aplicaci\xf3n."}),"\n",(0,t.jsx)(n.h3,{id:"photosection",children:(0,t.jsx)(n.code,{children:"PhotoSection"})}),"\n",(0,t.jsx)(n.p,{children:"Se utiliza para mostrar fotos o videos de perfil de manera condicional."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Props:"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Prop"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Tipo"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"src"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"URL de la imagen o video."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"alt"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Texto alternativo para accesibilidad."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"isVideo"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"boolean"})}),(0,t.jsxs)(n.td,{style:{textAlign:"left"},children:["Indica si el recurso debe renderizarse como video (",(0,t.jsx)(n.code,{children:"<video>"}),") o imagen (",(0,t.jsx)(n.code,{children:"<img>"}),")."]})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Ejemplo de Uso:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<PhotoSection \n  video={contact.video} \n  photo={contact.photo} \n  fallbackImage={`${process.env.PUBLIC_URL}/fallback-image.jpg`}\n/>\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"qrsection",children:(0,t.jsx)(n.code,{children:"QRSection"})}),"\n",(0,t.jsx)(n.p,{children:"Componente encargado de renderizar visualmente el c\xf3digo QR personalizado."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Props:"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Prop"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Tipo"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Descripci\xf3n"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"qrValue"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Valor (URL o texto) que se codificar\xe1."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"logo"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"URL del logotipo a incrustar en el centro."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"color"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Color hexadecimal de los puntos del QR."})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Ejemplo de Uso:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<QRSection \n  qrValue={`https://wa.me/${contact.phone}`} \n  logo={LOGO_QR} \n  color={COLORS.marathonRed}\n/>\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h3,{id:"vcardgenerator-p\xe1gina-principal",children:[(0,t.jsx)(n.code,{children:"VCardGenerator"})," (P\xe1gina Principal)"]}),"\n",(0,t.jsxs)(n.p,{children:["Sirve como el contenedor inteligente (",(0,t.jsx)(n.strong,{children:"Smart Component"}),") de la aplicaci\xf3n. No recibe propiedades (",(0,t.jsx)(n.code,{children:"props"}),"), ya que obtiene su contexto directamente de la URL."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Responsabilidades:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Lectura de URL"}),": Utiliza ",(0,t.jsx)(n.code,{children:"useSearchParams"})," para detectar par\xe1metros como ",(0,t.jsx)(n.code,{children:"id"}),", ",(0,t.jsx)(n.code,{children:"email"})," o ",(0,t.jsx)(n.code,{children:"phone"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"B\xfasqueda de Datos"}),": Cruza los par\xe1metros de la URL con el archivo ",(0,t.jsx)(n.code,{children:"data/employees.ts"})," para encontrar la informaci\xf3n del colaborador."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Visualizaci\xf3n"}),": Renderiza la tarjeta digital completa."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Generaci\xf3n VCF"}),": Ejecuta la l\xf3gica para crear y descargar el archivo de contacto ",(0,t.jsx)(n.code,{children:".vcf"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"2-enrutamiento-hashrouter-vs-browserrouter",children:"2. Enrutamiento (HashRouter vs BrowserRouter)"}),"\n",(0,t.jsxs)(n.p,{children:["Dado que la aplicaci\xf3n est\xe1 alojada en ",(0,t.jsx)(n.strong,{children:"GitHub Pages"}),", el servidor no soporta el enrutamiento del lado del cliente tradicional (History API) porque cualquier ruta distinta a ",(0,t.jsx)(n.code,{children:"/"})," retornar\xeda un error 404."]}),"\n",(0,t.jsxs)(n.p,{children:["Para solucionar esto, utilizamos ",(0,t.jsx)(n.strong,{children:"HashRouter"}),". Esto significa que todas las rutas se manejan despu\xe9s del s\xedmbolo ",(0,t.jsx)(n.code,{children:"#"})," en la URL."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Ruta VCard"}),": ",(0,t.jsx)(n.code,{children:"...github.io/vcard/#/?id=chernandez"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Ruta Generador"}),": ",(0,t.jsx)(n.code,{children:"...github.io/vcard/#/generator"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Implementaci\xf3n en ",(0,t.jsx)(n.code,{children:"App.tsx"}),":"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'import { HashRouter, Routes, Route } from \'react-router-dom\';\n\nfunction App() {\n  return (\n    <div className="App">\n      <HashRouter> {/* <--- Clave para GitHub Pages */}\n        <Routes>\n          <Route path="/" element={<VCardGenerator />} />\n          <Route path="/generator" element={<LinkGenerator />} />\n        </Routes>\n      </HashRouter>\n    </div>\n  );\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"3-estrategias-de-implementaci\xf3n",children:"3. Estrategias de Implementaci\xf3n"}),"\n",(0,t.jsx)(n.h3,{id:"sistema-de-resoluci\xf3n-de-identidad-reciclaje",children:"Sistema de Resoluci\xf3n de Identidad (Reciclaje)"}),"\n",(0,t.jsxs)(n.p,{children:["El componente ",(0,t.jsx)(n.code,{children:"VCardGenerator"}),' implementa una estrategia de "b\xfasqueda en cascada" para garantizar que siempre se muestre informaci\xf3n, incluso si el enlace es antiguo o si se reutilizan tarjetas NFC.']}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"L\xf3gica de B\xfasqueda:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"useEffect(() => {\n    const employeeId = getParam('id'); // 1. Intenta obtener ID expl\xedcito\n\n    if (employeeId) {\n      // A. B\xfasqueda Directa por ID\n      const foundEmployee = employees.find(emp => emp.id === employeeId);\n      if (foundEmployee) setContact(foundEmployee);\n      \n    } else {\n      // B. B\xfasqueda por coincidencia de datos (Reciclaje)\n      const urlEmail = getParam('email');\n      const urlPhone = getParam('phone');\n\n      if (urlEmail || urlPhone) {\n        // Busca en la base de datos alguien que tenga ese correo O tel\xe9fono\n        const matchedEmployee = employees.find(emp => {\n          return (emp.email === urlEmail) || (emp.phone === urlPhone);\n        });\n        \n        if (matchedEmployee) setContact(matchedEmployee);\n      }\n      \n      // C. Fallback a datos en URL (Modo Legacy)\n      // Si no encuentra nada en la BD, usa los datos crudos de la URL\n      else {\n         const firstName = getParam('firstName');\n         // ... construye objeto temporal con params\n      }\n    }\n}, [searchParams]);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"generaci\xf3n-y-optimizaci\xf3n-de-vcard",children:"Generaci\xf3n y Optimizaci\xf3n de VCard"}),"\n",(0,t.jsxs)(n.p,{children:["La creaci\xf3n del archivo ",(0,t.jsx)(n.code,{children:".vcf"})," implica un desaf\xedo importante: los l\xedmites de tama\xf1o para las fotos de perfil en dispositivos m\xf3viles (especialmente iOS)."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Procesamiento de Imagen con Canvas:"})}),"\n",(0,t.jsx)(n.p,{children:"Antes de incrustar la foto, la procesamos din\xe1micamente:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Obtenemos la imagen original."}),"\n",(0,t.jsx)(n.li,{children:"La dibujamos en un Canvas HTML5."}),"\n",(0,t.jsxs)(n.li,{children:["La redimensionamos a un m\xe1ximo de ",(0,t.jsx)(n.strong,{children:"300x300px"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Exportamos a Base64 con compresi\xf3n JPEG (0.7)."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Fragmento de l\xf3gica de optimizaci\xf3n\nif (contact.photo) {\n    const img = new Image();\n    // ... carga la imagen ...\n\n    // Redimensionamiento inteligente\n    const maxWidth = 300;\n    if (img.width > maxWidth) {\n        // ... calcula nuevo alto manteniendo aspecto\n    }\n\n    // Renderizado en Canvas\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    ctx?.drawImage(img, 0, 0, width, height);\n\n    // Conversi\xf3n a Base64 optimizado\n    const base64 = canvas.toDataURL('image/jpeg', 0.7).split(',')[1];\n    \n    vcard.addPhoto(base64, 'JPEG');\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"renderizado-de-c\xf3digos-qr",children:"Renderizado de C\xf3digos QR"}),"\n",(0,t.jsxs)(n.p,{children:["Para los c\xf3digos QR visuales se utiliza ",(0,t.jsx)(n.code,{children:"qr-code-styling"}),", permitiendo incrustar logos sin afectar la legibilidad."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const qrCode = new QRCodeStyling({\n    width: 350,\n    height: 350,\n    data: qrValue,\n    dotsOptions: {\n        color: COLORS.marathonRed, // Consistencia de marca\n        type: 'dots', // Estilo redondeado\n    },\n    image: LOGO_URL, \n    imageOptions: {\n        hideBackgroundDots: true, // Limpia el \xe1rea detr\xe1s del logo\n        imageSize: 0.4,\n    },\n});\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453(e,n,i){i.d(n,{R:()=>r,x:()=>o});var s=i(6540);const t={},a=s.createContext(t);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);